<!DOCTYPE html>
<html>
  <head>
    <title>Interrupted Events Playground</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/a11y-light.min.css"
      integrity="sha512-WDk6RzwygsN9KecRHAfm9HTN87LQjqdygDmkHSJxVkVI7ErCZ8ZWxP6T8RvBujY1n2/E4Ac+bn2ChXnp5rnnHA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      iframe { 
        width: 320px;
        height: 100px;
        background-color: lightgray;
        border: 2px solid black;
        box-sizing: border-box;
      }
      #iframe-container {
        height: 110px;
        background-color: grey;
        padding: 5px;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <h1>
      Interrupted Events Playground
    </h1>
    <p>
      This project demonstrates browser behavior where handlers for certain browser events, such as <code>pagehide</code> can be interrupted (i.e. the handlers never called) if a previous handler modifies the DOM. 
    </p>
    <ol>
      <li><button id="1-interrupted-page-hide">Interrupted pagehide Event</button></li>
    </ol>
    </div>
    <hr />
    <div>
      We are running the following JavaScript code on this page (see
      <a href="https://github.com/astegmaier/playground-interrupted-events"
        >github repo</a
      >):
    </div>
    <pre><code class="language-javascript" id="code"></code></pre>
    <script src="./index.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"
      integrity="sha512-bgHRAiTjGrzHzLyKOnpFvaEpGzJet3z4tZnXGjpsCcqOnAH6VGUx9frc5bcIhKTVLEiCO6vEhNAgx5jtLUYrfA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      fetch("./index.js")
        .then((response) => response.text())
        .then((code) => (document.getElementById("code").textContent = code))
        .then(() => hljs.highlightAll());
    </script>
  </body>
</html>
